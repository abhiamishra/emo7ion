{"ast":null,"code":"import { env } from '../env';\nimport { isMediaLoaded } from './isMediaLoaded';\nexport function awaitMediaLoaded(media) {\n  return new Promise(function (resolve, reject) {\n    if (media instanceof env.getEnv().Canvas || isMediaLoaded(media)) {\n      return resolve();\n    }\n\n    function onLoad(e) {\n      if (!e.currentTarget) return;\n      e.currentTarget.removeEventListener('load', onLoad);\n      e.currentTarget.removeEventListener('error', onError);\n      resolve(e);\n    }\n\n    function onError(e) {\n      if (!e.currentTarget) return;\n      e.currentTarget.removeEventListener('load', onLoad);\n      e.currentTarget.removeEventListener('error', onError);\n      reject(e);\n    }\n\n    media.addEventListener('load', onLoad);\n    media.addEventListener('error', onError);\n  });\n}","map":{"version":3,"mappings":"AAAA,SAASA,GAAT,QAAoB,QAApB;AACA,SAASC,aAAT,QAA8B,iBAA9B;AAEA,OAAM,SAAUC,gBAAV,CAA2BC,KAA3B,EAAyF;AAE7F,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAgB;AACjC,QAAIH,KAAK,YAAYH,GAAG,CAACO,MAAJ,GAAaC,MAA9B,IAAwCP,aAAa,CAACE,KAAD,CAAzD,EAAkE;AAChE,aAAOE,OAAO,EAAd;AACD;;AAED,aAASI,MAAT,CAAgBC,CAAhB,EAAwB;AACtB,UAAI,CAACA,CAAC,CAACC,aAAP,EAAsB;AACtBD,OAAC,CAACC,aAAF,CAAgBC,mBAAhB,CAAoC,MAApC,EAA4CH,MAA5C;AACAC,OAAC,CAACC,aAAF,CAAgBC,mBAAhB,CAAoC,OAApC,EAA6CC,OAA7C;AACAR,aAAO,CAACK,CAAD,CAAP;AACD;;AAED,aAASG,OAAT,CAAiBH,CAAjB,EAAyB;AACvB,UAAI,CAACA,CAAC,CAACC,aAAP,EAAsB;AACtBD,OAAC,CAACC,aAAF,CAAgBC,mBAAhB,CAAoC,MAApC,EAA4CH,MAA5C;AACAC,OAAC,CAACC,aAAF,CAAgBC,mBAAhB,CAAoC,OAApC,EAA6CC,OAA7C;AACAP,YAAM,CAACI,CAAD,CAAN;AACD;;AAEDP,SAAK,CAACW,gBAAN,CAAuB,MAAvB,EAA+BL,MAA/B;AACAN,SAAK,CAACW,gBAAN,CAAuB,OAAvB,EAAgCD,OAAhC;AACD,GArBM,CAAP;AAsBD","names":["env","isMediaLoaded","awaitMediaLoaded","media","Promise","resolve","reject","getEnv","Canvas","onLoad","e","currentTarget","removeEventListener","onError","addEventListener"],"sources":["../../../src/dom/awaitMediaLoaded.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}