{"ast":null,"code":"import { env } from '../env';\nexport function bufferToImage(buf) {\n  return new Promise(function (resolve, reject) {\n    if (!(buf instanceof Blob)) {\n      return reject('bufferToImage - expected buf to be of type: Blob');\n    }\n\n    var reader = new FileReader();\n\n    reader.onload = function () {\n      if (typeof reader.result !== 'string') {\n        return reject('bufferToImage - expected reader.result to be a string, in onload');\n      }\n\n      var img = env.getEnv().createImageElement();\n\n      img.onload = function () {\n        return resolve(img);\n      };\n\n      img.onerror = reject;\n      img.src = reader.result;\n    };\n\n    reader.onerror = reject;\n    reader.readAsDataURL(buf);\n  });\n}","map":{"version":3,"mappings":"AAAA,SAASA,GAAT,QAAoB,QAApB;AAEA,OAAM,SAAUC,aAAV,CAAwBC,GAAxB,EAAiC;AACrC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAgB;AACjC,QAAI,EAAEH,GAAG,YAAYI,IAAjB,CAAJ,EAA4B;AAC1B,aAAOD,MAAM,CAAC,kDAAD,CAAb;AACD;;AAED,QAAME,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,UAAM,CAACE,MAAP,GAAgB;AACd,UAAI,OAAOF,MAAM,CAACG,MAAd,KAAyB,QAA7B,EAAuC;AACrC,eAAOL,MAAM,CAAC,kEAAD,CAAb;AACD;;AAED,UAAMM,GAAG,GAAGX,GAAG,CAACY,MAAJ,GAAaC,kBAAb,EAAZ;;AACAF,SAAG,CAACF,MAAJ,GAAa;AAAM,sBAAO,CAACE,GAAD,CAAP;AAAY,OAA/B;;AACAA,SAAG,CAACG,OAAJ,GAAcT,MAAd;AACAM,SAAG,CAACI,GAAJ,GAAUR,MAAM,CAACG,MAAjB;AACD,KATD;;AAUAH,UAAM,CAACO,OAAP,GAAiBT,MAAjB;AACAE,UAAM,CAACS,aAAP,CAAqBd,GAArB;AACD,GAlBM,CAAP;AAmBD","names":["env","bufferToImage","buf","Promise","resolve","reject","Blob","reader","FileReader","onload","result","img","getEnv","createImageElement","onerror","src","readAsDataURL"],"sources":["../../../src/dom/bufferToImage.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}