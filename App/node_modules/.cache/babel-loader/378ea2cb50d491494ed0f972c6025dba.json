{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar lodash_1 = __importDefault(require(\"lodash\"));\n\nvar errorMessages_1 = __importDefault(require(\"../../libs/constants/errorMessages\"));\n\nvar respond_1 = __importDefault(require(\"../../utils/respond\"));\n\nvar request_1 = __importDefault(require(\"../../utils/request\"));\n\nfunction default_1(uploadOptions, defaultOptions, callback) {\n  if (!lodash_1.default.isObject(uploadOptions)) {\n    respond_1.default(true, errorMessages_1.default.MISSING_UPLOAD_DATA, callback);\n    return;\n  }\n\n  if (!uploadOptions.file) {\n    respond_1.default(true, errorMessages_1.default.MISSING_UPLOAD_FILE_PARAMETER, callback);\n    return;\n  }\n\n  if (!uploadOptions.fileName) {\n    respond_1.default(true, errorMessages_1.default.MISSING_UPLOAD_FILENAME_PARAMETER, callback);\n    return;\n  }\n\n  var formData = {};\n  var key;\n\n  for (key in uploadOptions) {\n    if (key) {\n      if (key == \"file\" && typeof uploadOptions.file != \"string\") {\n        formData.file = {\n          value: uploadOptions.file,\n          options: {\n            filename: uploadOptions.fileName,\n            contentType: null\n          }\n        };\n      } else if (key == \"tags\" && Array.isArray(uploadOptions.tags)) {\n        formData.tags = uploadOptions.tags.join(\",\");\n      } else if (key == \"extensions\" && Array.isArray(uploadOptions.extensions)) {\n        formData.extensions = JSON.stringify(uploadOptions.extensions);\n      } else if (key === \"customMetadata\" && typeof uploadOptions.customMetadata === \"object\" && !Array.isArray(uploadOptions.customMetadata) && uploadOptions.customMetadata !== null) {\n        formData.customMetadata = JSON.stringify(uploadOptions.customMetadata);\n      } else {\n        formData[key] = String(uploadOptions[key]);\n      }\n    }\n  }\n\n  var requestOptions = {\n    url: defaultOptions.uploadEndpoint || \"https://upload.imagekit.io/api/v1/files/upload\",\n    method: \"POST\",\n    formData: formData,\n    json: true\n  };\n  request_1.default(requestOptions, defaultOptions, callback);\n}\n\nexports.default = default_1;","map":{"version":3,"sources":["/Users/akshitaanand/Documents/GitHub/emotion/App/node_modules/imagekit/dist/libs/upload/index.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","lodash_1","require","errorMessages_1","respond_1","request_1","default_1","uploadOptions","defaultOptions","callback","default","isObject","MISSING_UPLOAD_DATA","file","MISSING_UPLOAD_FILE_PARAMETER","fileName","MISSING_UPLOAD_FILENAME_PARAMETER","formData","key","options","filename","contentType","Array","isArray","tags","join","extensions","JSON","stringify","customMetadata","String","requestOptions","url","uploadEndpoint","method","json"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lodash_1 = __importDefault(require(\"lodash\"));\nvar errorMessages_1 = __importDefault(require(\"../../libs/constants/errorMessages\"));\nvar respond_1 = __importDefault(require(\"../../utils/respond\"));\nvar request_1 = __importDefault(require(\"../../utils/request\"));\nfunction default_1(uploadOptions, defaultOptions, callback) {\n    if (!lodash_1.default.isObject(uploadOptions)) {\n        respond_1.default(true, errorMessages_1.default.MISSING_UPLOAD_DATA, callback);\n        return;\n    }\n    if (!uploadOptions.file) {\n        respond_1.default(true, errorMessages_1.default.MISSING_UPLOAD_FILE_PARAMETER, callback);\n        return;\n    }\n    if (!uploadOptions.fileName) {\n        respond_1.default(true, errorMessages_1.default.MISSING_UPLOAD_FILENAME_PARAMETER, callback);\n        return;\n    }\n    var formData = {};\n    var key;\n    for (key in uploadOptions) {\n        if (key) {\n            if (key == \"file\" && typeof uploadOptions.file != \"string\") {\n                formData.file = {\n                    value: uploadOptions.file,\n                    options: {\n                        filename: uploadOptions.fileName,\n                        contentType: null,\n                    },\n                };\n            }\n            else if (key == \"tags\" && Array.isArray(uploadOptions.tags)) {\n                formData.tags = uploadOptions.tags.join(\",\");\n            }\n            else if (key == \"extensions\" && Array.isArray(uploadOptions.extensions)) {\n                formData.extensions = JSON.stringify(uploadOptions.extensions);\n            }\n            else if (key === \"customMetadata\" && typeof uploadOptions.customMetadata === \"object\" &&\n                !Array.isArray(uploadOptions.customMetadata) && uploadOptions.customMetadata !== null) {\n                formData.customMetadata = JSON.stringify(uploadOptions.customMetadata);\n            }\n            else {\n                formData[key] = String(uploadOptions[key]);\n            }\n        }\n    }\n    var requestOptions = {\n        url: defaultOptions.uploadEndpoint || \"https://upload.imagekit.io/api/v1/files/upload\",\n        method: \"POST\",\n        formData: formData,\n        json: true,\n    };\n    request_1.default(requestOptions, defaultOptions, callback);\n}\nexports.default = default_1;\n"]},"metadata":{},"sourceType":"script"}