{"ast":null,"code":"import { __awaiter, __extends, __generator } from \"tslib\";\nimport { FaceDetection } from '../classes';\nimport { BOX_ANCHORS, BOX_ANCHORS_SEPARABLE, DEFAULT_MODEL_NAME, DEFAULT_MODEL_NAME_SEPARABLE_CONV, IOU_THRESHOLD, MEAN_RGB_SEPARABLE } from './const';\nimport { TinyYolov2Base } from './TinyYolov2Base';\n\nvar TinyYolov2 =\n/** @class */\nfunction (_super) {\n  __extends(TinyYolov2, _super);\n\n  function TinyYolov2(withSeparableConvs) {\n    if (withSeparableConvs === void 0) {\n      withSeparableConvs = true;\n    }\n\n    var _this = this;\n\n    var config = Object.assign({}, {\n      withSeparableConvs: withSeparableConvs,\n      iouThreshold: IOU_THRESHOLD,\n      classes: ['face']\n    }, withSeparableConvs ? {\n      anchors: BOX_ANCHORS_SEPARABLE,\n      meanRgb: MEAN_RGB_SEPARABLE\n    } : {\n      anchors: BOX_ANCHORS,\n      withClassScores: true\n    });\n    _this = _super.call(this, config) || this;\n    return _this;\n  }\n\n  Object.defineProperty(TinyYolov2.prototype, \"withSeparableConvs\", {\n    get: function () {\n      return this.config.withSeparableConvs;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(TinyYolov2.prototype, \"anchors\", {\n    get: function () {\n      return this.config.anchors;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  TinyYolov2.prototype.locateFaces = function (input, forwardParams) {\n    return __awaiter(this, void 0, void 0, function () {\n      var objectDetections;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.detect(input, forwardParams)];\n\n          case 1:\n            objectDetections = _a.sent();\n            return [2\n            /*return*/\n            , objectDetections.map(function (det) {\n              return new FaceDetection(det.score, det.relativeBox, {\n                width: det.imageWidth,\n                height: det.imageHeight\n              });\n            })];\n        }\n      });\n    });\n  };\n\n  TinyYolov2.prototype.getDefaultModelName = function () {\n    return this.withSeparableConvs ? DEFAULT_MODEL_NAME_SEPARABLE_CONV : DEFAULT_MODEL_NAME;\n  };\n\n  TinyYolov2.prototype.extractParamsFromWeigthMap = function (weightMap) {\n    return _super.prototype.extractParamsFromWeigthMap.call(this, weightMap);\n  };\n\n  return TinyYolov2;\n}(TinyYolov2Base);\n\nexport { TinyYolov2 };","map":{"version":3,"mappings":";AAEA,SAASA,aAAT,QAAqC,YAArC;AAGA,SACEC,WADF,EAEEC,qBAFF,EAGEC,kBAHF,EAIEC,iCAJF,EAKEC,aALF,EAMEC,kBANF,QAOO,SAPP;AAQA,SAASC,cAAT,QAA+B,kBAA/B;;AAIA;AAAA;AAAA;AAAgCC;;AAE9B,sBAAYC,kBAAZ,EAA8C;AAAlC;AAAAA;AAAkC;;AAA9C;;AACE,QAAMC,MAAM,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB;AAC/BH,wBAAkB,oBADa;AAE/BI,kBAAY,EAAER,aAFiB;AAG/BS,aAAO,EAAE,CAAC,MAAD;AAHsB,KAAlB,EAKfL,kBAAkB,GACd;AACAM,aAAO,EAAEb,qBADT;AAEAc,aAAO,EAAEV;AAFT,KADc,GAKd;AACAS,aAAO,EAAEd,WADT;AAEAgB,qBAAe,EAAE;AAFjB,KAVW,CAAf;AAgBAC,8BAAMR,MAAN,KAAa,IAAb;;AACD;;AAEDC,wBAAWQ,oBAAX,EAAW,oBAAX,EAA6B;SAA7B;AACE,aAAO,KAAKT,MAAL,CAAYD,kBAAnB;AACD,KAF4B;oBAAA;;AAAA,GAA7B;AAIAE,wBAAWQ,oBAAX,EAAW,SAAX,EAAkB;SAAlB;AACE,aAAO,KAAKT,MAAL,CAAYK,OAAnB;AACD,KAFiB;oBAAA;;AAAA,GAAlB;;AAIaI,qCAAb,UAAyBC,KAAzB,EAA2CC,aAA3C,EAA4E;;;;;;AACjD;AAAA;AAAA,cAAM,KAAKC,MAAL,CAAYF,KAAZ,EAAmBC,aAAnB,CAAN;;;AAAnBE,4BAAgB,GAAGC,SAAnB;AACN;AAAA;AAAA,cAAOD,gBAAgB,CAACE,GAAjB,CAAqB,eAAG;AAAI,yBAAIzB,aAAJ,CAAkB0B,GAAG,CAACC,KAAtB,EAA6BD,GAAG,CAACE,WAAjC,EAA8C;AAAEC,qBAAK,EAAEH,GAAG,CAACI,UAAb;AAAyBC,sBAAM,EAAEL,GAAG,CAACM;AAArC,eAA9C;AAAiG,aAA7H,CAAP;;;;AACD,GAHY;;AAKHb,6CAAV;AACE,WAAO,KAAKV,kBAAL,GAA0BL,iCAA1B,GAA8DD,kBAArE;AACD,GAFS;;AAIAgB,oDAAV,UAAqCc,SAArC,EAAiE;AAC/D,WAAOC,iBAAMC,0BAAN,CAAgCC,IAAhC,CAAgC,IAAhC,EAAiCH,SAAjC,CAAP;AACD,GAFS;;AAGZ;AA1CA,EAAgC1B,cAAhC","names":["FaceDetection","BOX_ANCHORS","BOX_ANCHORS_SEPARABLE","DEFAULT_MODEL_NAME","DEFAULT_MODEL_NAME_SEPARABLE_CONV","IOU_THRESHOLD","MEAN_RGB_SEPARABLE","TinyYolov2Base","__extends","withSeparableConvs","config","Object","assign","iouThreshold","classes","anchors","meanRgb","withClassScores","_this","TinyYolov2","input","forwardParams","detect","objectDetections","_a","map","det","score","relativeBox","width","imageWidth","height","imageHeight","weightMap","_super","extractParamsFromWeigthMap","call"],"sources":["../../../src/tinyYolov2/TinyYolov2.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}