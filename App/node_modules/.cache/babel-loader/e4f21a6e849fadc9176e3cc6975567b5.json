{"ast":null,"code":"import * as tf from '@tensorflow/tfjs-core';\nimport { depthwiseSeparableConv } from '../common/depthwiseSeparableConv';\nexport function denseBlock3(x, denseBlockParams, isFirstLayer) {\n  if (isFirstLayer === void 0) {\n    isFirstLayer = false;\n  }\n\n  return tf.tidy(function () {\n    var out1 = tf.relu(isFirstLayer ? tf.add(tf.conv2d(x, denseBlockParams.conv0.filters, [2, 2], 'same'), denseBlockParams.conv0.bias) : depthwiseSeparableConv(x, denseBlockParams.conv0, [2, 2]));\n    var out2 = depthwiseSeparableConv(out1, denseBlockParams.conv1, [1, 1]);\n    var in3 = tf.relu(tf.add(out1, out2));\n    var out3 = depthwiseSeparableConv(in3, denseBlockParams.conv2, [1, 1]);\n    return tf.relu(tf.add(out1, tf.add(out2, out3)));\n  });\n}\nexport function denseBlock4(x, denseBlockParams, isFirstLayer, isScaleDown) {\n  if (isFirstLayer === void 0) {\n    isFirstLayer = false;\n  }\n\n  if (isScaleDown === void 0) {\n    isScaleDown = true;\n  }\n\n  return tf.tidy(function () {\n    var out1 = tf.relu(isFirstLayer ? tf.add(tf.conv2d(x, denseBlockParams.conv0.filters, isScaleDown ? [2, 2] : [1, 1], 'same'), denseBlockParams.conv0.bias) : depthwiseSeparableConv(x, denseBlockParams.conv0, isScaleDown ? [2, 2] : [1, 1]));\n    var out2 = depthwiseSeparableConv(out1, denseBlockParams.conv1, [1, 1]);\n    var in3 = tf.relu(tf.add(out1, out2));\n    var out3 = depthwiseSeparableConv(in3, denseBlockParams.conv2, [1, 1]);\n    var in4 = tf.relu(tf.add(out1, tf.add(out2, out3)));\n    var out4 = depthwiseSeparableConv(in4, denseBlockParams.conv3, [1, 1]);\n    return tf.relu(tf.add(out1, tf.add(out2, tf.add(out3, out4))));\n  });\n}","map":{"version":3,"mappings":"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","names":["tf","depthwiseSeparableConv","denseBlock3","x","denseBlockParams","isFirstLayer","tidy","out1","relu","add","conv2d","conv0","filters","bias","out2","conv1","in3","out3","conv2","denseBlock4","isScaleDown","in4","out4","conv3"],"sources":["../../../src/faceFeatureExtractor/denseBlock.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}