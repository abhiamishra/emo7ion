{"ast":null,"code":"import { disposeUnusedWeightTensors, extractWeightEntryFactory, loadSeparableConvParamsFactory } from '../common';\nimport { loadConvParamsFactory } from '../common/loadConvParamsFactory';\nimport { range } from '../utils';\n\nfunction loadParamsFactory(weightMap, paramMappings) {\n  var extractWeightEntry = extractWeightEntryFactory(weightMap, paramMappings);\n  var extractConvParams = loadConvParamsFactory(extractWeightEntry);\n  var extractSeparableConvParams = loadSeparableConvParamsFactory(extractWeightEntry);\n\n  function extractReductionBlockParams(mappedPrefix) {\n    var separable_conv0 = extractSeparableConvParams(mappedPrefix + \"/separable_conv0\");\n    var separable_conv1 = extractSeparableConvParams(mappedPrefix + \"/separable_conv1\");\n    var expansion_conv = extractConvParams(mappedPrefix + \"/expansion_conv\");\n    return {\n      separable_conv0: separable_conv0,\n      separable_conv1: separable_conv1,\n      expansion_conv: expansion_conv\n    };\n  }\n\n  function extractMainBlockParams(mappedPrefix) {\n    var separable_conv0 = extractSeparableConvParams(mappedPrefix + \"/separable_conv0\");\n    var separable_conv1 = extractSeparableConvParams(mappedPrefix + \"/separable_conv1\");\n    var separable_conv2 = extractSeparableConvParams(mappedPrefix + \"/separable_conv2\");\n    return {\n      separable_conv0: separable_conv0,\n      separable_conv1: separable_conv1,\n      separable_conv2: separable_conv2\n    };\n  }\n\n  return {\n    extractConvParams: extractConvParams,\n    extractSeparableConvParams: extractSeparableConvParams,\n    extractReductionBlockParams: extractReductionBlockParams,\n    extractMainBlockParams: extractMainBlockParams\n  };\n}\n\nexport function extractParamsFromWeigthMap(weightMap, numMainBlocks) {\n  var paramMappings = [];\n\n  var _a = loadParamsFactory(weightMap, paramMappings),\n      extractConvParams = _a.extractConvParams,\n      extractSeparableConvParams = _a.extractSeparableConvParams,\n      extractReductionBlockParams = _a.extractReductionBlockParams,\n      extractMainBlockParams = _a.extractMainBlockParams;\n\n  var entry_flow_conv_in = extractConvParams('entry_flow/conv_in');\n  var entry_flow_reduction_block_0 = extractReductionBlockParams('entry_flow/reduction_block_0');\n  var entry_flow_reduction_block_1 = extractReductionBlockParams('entry_flow/reduction_block_1');\n  var entry_flow = {\n    conv_in: entry_flow_conv_in,\n    reduction_block_0: entry_flow_reduction_block_0,\n    reduction_block_1: entry_flow_reduction_block_1\n  };\n  var middle_flow = {};\n  range(numMainBlocks, 0, 1).forEach(function (idx) {\n    middle_flow[\"main_block_\" + idx] = extractMainBlockParams(\"middle_flow/main_block_\" + idx);\n  });\n  var exit_flow_reduction_block = extractReductionBlockParams('exit_flow/reduction_block');\n  var exit_flow_separable_conv = extractSeparableConvParams('exit_flow/separable_conv');\n  var exit_flow = {\n    reduction_block: exit_flow_reduction_block,\n    separable_conv: exit_flow_separable_conv\n  };\n  disposeUnusedWeightTensors(weightMap, paramMappings);\n  return {\n    params: {\n      entry_flow: entry_flow,\n      middle_flow: middle_flow,\n      exit_flow: exit_flow\n    },\n    paramMappings: paramMappings\n  };\n}","map":{"version":3,"mappings":"AAEA,SACEA,0BADF,EAEEC,yBAFF,EAGEC,8BAHF,QAKO,WALP;AAMA,SAASC,qBAAT,QAAsC,iCAAtC;AACA,SAASC,KAAT,QAAsB,UAAtB;;AAGA,SAASC,iBAAT,CAA2BC,SAA3B,EAA2CC,aAA3C,EAAwE;AAEtE,MAAMC,kBAAkB,GAAGP,yBAAyB,CAACK,SAAD,EAAYC,aAAZ,CAApD;AAEA,MAAME,iBAAiB,GAAGN,qBAAqB,CAACK,kBAAD,CAA/C;AACA,MAAME,0BAA0B,GAAGR,8BAA8B,CAACM,kBAAD,CAAjE;;AAEA,WAASG,2BAAT,CAAqCC,YAArC,EAAyD;AAEvD,QAAMC,eAAe,GAAGH,0BAA0B,CAAIE,YAAY,qBAAhB,CAAlD;AACA,QAAME,eAAe,GAAGJ,0BAA0B,CAAIE,YAAY,qBAAhB,CAAlD;AACA,QAAMG,cAAc,GAAGN,iBAAiB,CAAIG,YAAY,oBAAhB,CAAxC;AAEA,WAAO;AAAEC,qBAAe,iBAAjB;AAAmBC,qBAAe,iBAAlC;AAAoCC,oBAAc;AAAlD,KAAP;AACD;;AAED,WAASC,sBAAT,CAAgCJ,YAAhC,EAAoD;AAElD,QAAMC,eAAe,GAAGH,0BAA0B,CAAIE,YAAY,qBAAhB,CAAlD;AACA,QAAME,eAAe,GAAGJ,0BAA0B,CAAIE,YAAY,qBAAhB,CAAlD;AACA,QAAMK,eAAe,GAAGP,0BAA0B,CAAIE,YAAY,qBAAhB,CAAlD;AAEA,WAAO;AAAEC,qBAAe,iBAAjB;AAAmBC,qBAAe,iBAAlC;AAAoCG,qBAAe;AAAnD,KAAP;AACD;;AAED,SAAO;AACLR,qBAAiB,mBADZ;AAELC,8BAA0B,4BAFrB;AAGLC,+BAA2B,6BAHtB;AAILK,0BAAsB;AAJjB,GAAP;AAMD;;AAED,OAAM,SAAUE,0BAAV,CACJZ,SADI,EAEJa,aAFI,EAEiB;AAGrB,MAAMZ,aAAa,GAAmB,EAAtC;;AAEM;AAAA,MACJE,wCADI;AAAA,MAEJC,0DAFI;AAAA,MAGJC,4DAHI;AAAA,MAIJK,kDAJI;;AAON,MAAMI,kBAAkB,GAAGX,iBAAiB,CAAC,oBAAD,CAA5C;AACA,MAAMY,4BAA4B,GAAGV,2BAA2B,CAAC,8BAAD,CAAhE;AACA,MAAMW,4BAA4B,GAAGX,2BAA2B,CAAC,8BAAD,CAAhE;AAEA,MAAMY,UAAU,GAAG;AACjBC,WAAO,EAAEJ,kBADQ;AAEjBK,qBAAiB,EAAEJ,4BAFF;AAGjBK,qBAAiB,EAAEJ;AAHF,GAAnB;AAMA,MAAMK,WAAW,GAAG,EAApB;AACAvB,OAAK,CAACe,aAAD,EAAgB,CAAhB,EAAmB,CAAnB,CAAL,CAA2BS,OAA3B,CAAmC,UAACC,GAAD,EAAI;AACrCF,eAAW,CAAC,gBAAcE,GAAf,CAAX,GAAmCb,sBAAsB,CAAC,4BAA0Ba,GAA3B,CAAzD;AACD,GAFD;AAIA,MAAMC,yBAAyB,GAAGnB,2BAA2B,CAAC,2BAAD,CAA7D;AACA,MAAMoB,wBAAwB,GAAGrB,0BAA0B,CAAC,0BAAD,CAA3D;AAEA,MAAMsB,SAAS,GAAG;AAChBC,mBAAe,EAAEH,yBADD;AAEhBI,kBAAc,EAAEH;AAFA,GAAlB;AAKA/B,4BAA0B,CAACM,SAAD,EAAYC,aAAZ,CAA1B;AAEA,SAAO;AAAE4B,UAAM,EAAE;AAAEZ,gBAAU,YAAZ;AAAcI,iBAAW,aAAzB;AAA2BK,eAAS;AAApC,KAAV;AAAkDzB,iBAAa;AAA/D,GAAP;AACD","names":["disposeUnusedWeightTensors","extractWeightEntryFactory","loadSeparableConvParamsFactory","loadConvParamsFactory","range","loadParamsFactory","weightMap","paramMappings","extractWeightEntry","extractConvParams","extractSeparableConvParams","extractReductionBlockParams","mappedPrefix","separable_conv0","separable_conv1","expansion_conv","extractMainBlockParams","separable_conv2","extractParamsFromWeigthMap","numMainBlocks","entry_flow_conv_in","entry_flow_reduction_block_0","entry_flow_reduction_block_1","entry_flow","conv_in","reduction_block_0","reduction_block_1","middle_flow","forEach","idx","exit_flow_reduction_block","exit_flow_separable_conv","exit_flow","reduction_block","separable_conv","params"],"sources":["../../../src/xception/extractParamsFromWeigthMap.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}